<mxfile host="app.diagrams.net" modified="2024-05-07T09:50:51.516Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36" etag="FQoPVlRoyj7hwCgtxEY8" version="24.3.0" type="github">
  <diagram name="第 1 页" id="BZP7j4EBE2frMY6dUary">
    <mxGraphModel dx="1761" dy="2528" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-2" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.983;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-825.5" y="-711" as="sourcePoint" />
            <mxPoint x="806.857" y="-713.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-52" value="1. 解析gr请求参数，写入环境变量供上下游节点使用，如操作系统、手机版本、showlist、history_info等&#xa;2. 分配queue_name多队列的数据资源（不同功能队列，如live_video_immer/live_immer_ds_queue等）&#xa;3. 加载词典数据供后续（immer_ecom_default_recall_dict、immer_ecom_stat_cf_recall_dict 等）" style="text;whiteSpace=wrap;verticalAlign=middle;" parent="1" vertex="1">
          <mxGeometry x="-164.5" y="-1130" width="675" height="64" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-54" value="用户类型，是否YY用户" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="60.5" y="-1021.28" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-55" value="从UMS服务中读取用户行为信息及用户画像。&#xa;无个性化实现（代码全注释），调用基类feed_q::marvel::UserModelHandler加载模型&#xa;[.@feature] 如下：&#xa;- profile_ml 用户基本属性；- feed_beha_model 互动数据；&#xa;- vertical_zhibo_readlist 各场景点击列表；- live_meditation_um 用户深知模型；&#xa;- video_dislike 视频dislike列表；- live_user_model 直播用户模型；&#xa;- immerse_live_readlist、feed_live_readlist、mv_live_readlist 直播浏览列表&#xa;... ..." style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="57.5" y="-970.83" width="462" height="70" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-57" value="用户兴趣计算模块；&#xa;加载计算算子：OperatorManager&lt;AttentionFunc&gt;::global()-&gt;get_operator(name);&#xa;[.@operator] ： cal_after_user_model 处理用户模型的数据存入上下文；merge_follow_map 合并用户的关注列表； &#xa;cal_session_history 整合session_list并去重 ... ...&#xa;" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-162.5" y="-852.21" width="671" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-58" value="读取用户trace正排记录；&#xa;根据用户模型将不同直播类型的信息（直播-title_sign，预告-star_id）放入上下文，并去重&#xa;PS：入口直播间信息 - cntx-&gt;_query_nid" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-160.5" y="-774" width="531" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-59" value="召回倒排索引&#xa;Ø 过滤掉直播资源 FOR 7天未点击/未展现/ user_activity 活跃度标记为4,5,6的用户；大字版每天最多展现2次直播；用户处于弱网环境下，不召回直播资源&#xa;Ø pre_process根据配置里的队列和attention，对召回资源的Attention map分类填充，没有重写in_process,应该在里面进行召回；&#xa;    沉浸式召回混合分发[.@sub_request] name: &quot;yy_immer_attentions&quot;,&quot;yy_immer_attentions_s3&quot;,&quot;yy_immer_attentions_non_s3&quot;,&#xa;&quot;bjh_immer_attentions&quot;,&quot;stars&quot;,&quot;bs_follows&#39;&quot;,&quot;hf_attentions&quot;, &quot;zcm_attentions&#39;&quot;,&quot;bs_one_quantitys&quot;, &quot;ecom_immer_realperson_attentions&quot;, &#xa;&quot;ecom_immer_digital_attentions&quot; -&gt; cntx-&gt;_selected_recall_xx_attentions&#xa;Ø write_back_result:将多路urs的返回结果去重后写入single_response_ptr(stg_config-&gt;_key - live_video_immer 队列)" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-159.5" y="-712" width="830" height="150" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#FC8D6A;endArrow=classic;endFill=1;" parent="1" source="CTMLsmFPayaTSugQ_vrA-2" target="CTMLsmFPayaTSugQ_vrA-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1q_19juKDQYcNWKgW3-u-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;strokeColor=#17AAD5;" parent="1" source="CTMLsmFPayaTSugQ_vrA-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-439.5" y="-1001" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-272.5" y="-1050" />
              <mxPoint x="-439.5" y="-1050" />
              <mxPoint x="-439.5" y="-1002" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1q_19juKDQYcNWKgW3-u-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#17AAD5;" parent="1" source="CTMLsmFPayaTSugQ_vrA-2" target="CTMLsmFPayaTSugQ_vrA-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-2" value="&lt;font style=&quot;font-size: 12px;&quot;&gt;SBImmerStartPb&lt;/font&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;（StartHandler）&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-305.3216704288939" y="-1126" width="130.0135440180587" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=classic;endFill=1;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-3" target="CTMLsmFPayaTSugQ_vrA-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-3" value="QueryUserType&lt;div&gt;(UserTypeHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-88.15914221218958" y="-1026.645790525133" width="131.10609480812641" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;endArrow=classic;endFill=1;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-4" target="CTMLsmFPayaTSugQ_vrA-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-4" value="SBImmerRecallUms&lt;div&gt;(UserModelHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-99.08465011286683" y="-948.5571626656853" width="154.04966139954854" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-7" target="CTMLsmFPayaTSugQ_vrA-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-7" value="SBImmerAttention&lt;div&gt;(AttentionHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-306.41422121896164" y="-852.2144035328677" width="131.10609480812641" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#FC8D6A;dashed=1;" parent="1" source="CTMLsmFPayaTSugQ_vrA-8" target="CTMLsmFPayaTSugQ_vrA-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-8" value="SBImmerBeforeGcms&lt;div&gt;(BeforeGcms)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-315.1546275395034" y="-773.4827989564371" width="148.58690744920995" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;strokeColor=#FC8D6A;dashed=1;" parent="1" source="CTMLsmFPayaTSugQ_vrA-9" target="CTMLsmFPayaTSugQ_vrA-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-273.5" y="-602" />
              <mxPoint x="-348.5" y="-602" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;strokeColor=#17AAD5;" parent="1" source="CTMLsmFPayaTSugQ_vrA-9" target="CTMLsmFPayaTSugQ_vrA-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-208.5" y="-602" />
              <mxPoint x="-131.5" y="-602" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-10" target="CTMLsmFPayaTSugQ_vrA-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-9" value="SBImmerRecallUrs&lt;div&gt;(RecallUrsHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-306.41422121896164" y="-684.6493352872756" width="131.10609480812641" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-10" value="SBImmerRecallGcms&lt;div&gt;(GcmsHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-412.50302483069976" y="-569.7547561624751" width="132.19864559819413" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-11" target="CTMLsmFPayaTSugQ_vrA-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-11" value="SBImmerMergeGcms&lt;div&gt;(MergeGcmsHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-314.1546275395034" y="-457.880548856221" width="148.58690744920995" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FC8D6A;dashed=1;" parent="1" source="CTMLsmFPayaTSugQ_vrA-12" target="CTMLsmFPayaTSugQ_vrA-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-12" value="ImmerseSonar&lt;div&gt;(SonarHandler)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-295.48871331828445" y="-373.7104337225885" width="110.34762979683974" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-13" target="CTMLsmFPayaTSugQ_vrA-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-13" value="SBImmerFilter&lt;div&gt;(FilterHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-295.48871331828445" y="-274.1525060622589" width="110.34762979683974" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-40" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FC8D6A;dashed=1;" parent="1" source="CTMLsmFPayaTSugQ_vrA-14" target="CTMLsmFPayaTSugQ_vrA-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-14" value="SBImmerDiversity&lt;div style=&quot;line-height: 140%;&quot;&gt;(DiversityHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-304.2291196388262" y="-174.2782987560047" width="127.82844243792324" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#FC8D6A;dashed=1;" parent="1" target="CTMLsmFPayaTSugQ_vrA-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-240.34210526315792" y="91.63487129610803" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;strokeColor=#17AAD5;dashed=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="CTMLsmFPayaTSugQ_vrA-15" target="CTMLsmFPayaTSugQ_vrA-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-420.5" y="188" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-277.5" y="159" />
              <mxPoint x="-466.5" y="159" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-16" target="CTMLsmFPayaTSugQ_vrA-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;strokeColor=#17AAD5;dashed=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="CTMLsmFPayaTSugQ_vrA-15" target="CTMLsmFPayaTSugQ_vrA-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-202.5" y="159" />
              <mxPoint x="106.5" y="159" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-16" value="SBImmerFine_Rank&lt;div&gt;(Router 并行预测)&lt;br&gt;&lt;/div&gt;&lt;div&gt;tag:&amp;nbsp;shoubai_immer_fine&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-328.5" y="203.49" width="177" height="55.51" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FC8D6A;dashed=1;" parent="1" source="CTMLsmFPayaTSugQ_vrA-17" target="CTMLsmFPayaTSugQ_vrA-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-15" value="SBImmerSimpleAdjust&lt;div&gt;(SimpleAdjust)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-315.1546275395034" y="47.61628036879574" width="149.67945823927766" height="51.01859092731204" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-17" value="SBImmerMultiAdjust&lt;div&gt;(MultiAdjustHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-315.1546275395034" y="369.0046949813037" width="149.67945823927766" height="51.01859092731204" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-18" target="CTMLsmFPayaTSugQ_vrA-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-18" value="SBImmerMergeQueue&lt;div&gt;(MergeQueue)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-315.1546275395034" y="584.8789022875579" width="149.67945823927766" height="51.01859092731204" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#FC8D6A;" parent="1" source="CTMLsmFPayaTSugQ_vrA-19" target="CTMLsmFPayaTSugQ_vrA-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-19" value="SBImmerIntervention&lt;div&gt;(InterventionHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-315.1546275395034" y="772.7531095938122" width="150.67945823927766" height="51.01859092731204" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-20" value="SBImmerEndPb&lt;div&gt;(EndHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FC8D6A;" parent="1" vertex="1">
          <mxGeometry x="-294.48616252821665" y="956.9973169000664" width="109.16252821670429" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;strokeColor=#17AAD5;" parent="1" source="CTMLsmFPayaTSugQ_vrA-22" target="CTMLsmFPayaTSugQ_vrA-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-22" value="QueryUserTypeExp" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#17AAD5;" parent="1" vertex="1">
          <mxGeometry x="-311.3295033860045" y="-1018.5571626656853" width="142.0316027088036" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;strokeColor=#17AAD5;" parent="1" source="CTMLsmFPayaTSugQ_vrA-23" target="CTMLsmFPayaTSugQ_vrA-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-23" value="SBImmerMsgRecallGcms&lt;div&gt;(GcmsHandler)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#17AAD5;" parent="1" vertex="1">
          <mxGeometry x="-214.63995485327314" y="-566.7547561624751" width="166.06772009029348" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;strokeColor=#17AAD5;dashed=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="CTMLsmFPayaTSugQ_vrA-24" target="CTMLsmFPayaTSugQ_vrA-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-470.5" y="294" />
              <mxPoint x="-277.5" y="294" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-24" value="SBImmerDsCvr_Rank&lt;div&gt;(Router&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;并行预测&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;tag:&amp;nbsp;shoubai_immer_ds_cvr&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#17AAD5;" parent="1" vertex="1">
          <mxGeometry x="-552.5" y="205.49" width="172" height="56.51" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;dashed=1;strokeColor=#17AAD5;" parent="1" source="CTMLsmFPayaTSugQ_vrA-25" target="CTMLsmFPayaTSugQ_vrA-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="106.5" y="294" />
              <mxPoint x="-202.5" y="294" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-25" value="SBImmerRecallDup&lt;div&gt;(RecallDup)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#17AAD5;" parent="1" vertex="1">
          <mxGeometry x="32.5" y="206.49" width="148" height="50.72" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-60" value="queue: live_video_immer; tag: shoubai_immer_msg; &#xa;gcms_plugin_name:gcms_Iive_msg&#xa;读取正排信息 - 直播间实时信号，操作灌入在gcms_data_map中&#xa;gcms_live_msg.conf - url_sign, is_gaming, labels. live_com，high_light_pv 等" style="text;whiteSpace=wrap;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-40.5" y="-579.03" width="451" height="80.03" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-61" value="queue: live_video_immer; tag: shoubai_immer; &#xa;gcms_plugin_name:video_gcms,&#xa;读取正排信息 - 手百视频 (RecVideoInfo、NewsInfoData)&#xa;数据更新至 live_video_immer队列中&#xa;PS：过滤掉拿不到正排的无效资源&#xa;" style="text;whiteSpace=wrap;spacing=6;" parent="1" vertex="1">
          <mxGeometry x="-729.5" y="-581.03" width="360" height="80.03" as="geometry" />
        </mxCell>
        <UserObject label="从merge_tag（shoubai_immer_msg）对应map中取出实时数据与 live_video_immer 队列中数据合并&#xa;具体地，遍历single_response_ptr,通过扩张protol的字段，追加gcms中对应的直播间信息（静态画像特征，比如挂机时长，是否real face,唱歌还是跳舞，年龄等）" link="获取新gcms请求的结果，遍历single_response._ptr=cntx&#xa;&gt;get_single_.res(key),通过扩张protol的字段，将gcms中对应的直播间信息追&#xa;加到single_response_ptr中，追加特征&#xa;●&#xa;gcms里都是一些静态画像特征，比如挂机时长，是否real face,唱歌还是跳&#xa;舞，年龄等" id="CTMLsmFPayaTSugQ_vrA-62">
          <mxCell style="text;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="-156.5" y="-471" width="586" height="60" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-64" value="从redis获取直播间统计特征 &amp; 召回相似主播：&#xa;- sb_read_sonar_redis_by_rid：将队列中直播资源的rid存入live_video_immer 队列（key）中&#xa;- sb_deal_sonar_redis by_rid：解析从redis中读取的用户在每个直播间的统计特征（展现/点击/订单/分享等数据），存入到队列live_video_immer中的资源信息&#xa;- sb_immer_read_sonar_redis_by_query_nid：拼接沉浸式入口nid为key请求redis&#xa;- sb_immer_deal_sonar_redis_by_query_nid：获取沉浸式入口主播id的icf相似主播" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-169.3" y="-390.43" width="899.8" height="110" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-65" value="召回结果过滤算子（key: live_video_immer）&#xa;[.@filter]&#xa;- filter_sb_immer_by_source 来源相关性过滤；&#xa;- filter_by_immer_anchor_level  沉浸式场景主播等级过滤，小流量过滤S3主播；&#xa;- ... ...&#xa;" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-170.5" y="-293.43" width="811" height="81.43" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-66" value="功能多样性队列拆分&#xa;● live_video_immer队列：基于所有bs的召回结果，经[..@operator] 处理产出bs_result和bs_skip_result&#xa;● live_follow_queue 队列：关注队列&#xa;[..@operator] 处理：diversity_for_follow_queue 从所有bs的召回结果bs_result中过滤捞出关注主播的直播间&#xa;● live_immer_ds_queue队列：沉浸式电商队列&#xa;[..@operator] 处理：diversity_for_immer_ds_queue 从所有bs的召回结果bs_result中过滤捞出电商直播间&#xa;● live_immer_ds_rank_queue队列：沉浸式电商实验队列&#xa;[..@operator] 处理：diversity_for_immer_ds_rank_queue 从所有bs的召回结果bs_result中过滤捞出电商直播间&#xa;● yyflowgift_queue  流量礼物&#xa;[..@operator] 处理：yyflowgift_cb_recall&#xa;" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-169.3" y="-200" width="689.3" height="170" as="geometry" />
        </mxCell>
        <UserObject label="队列结果粗排（no model）， 粗排得分 cupai_final_score 写入res_score字段&#xa;● live_video_immer队列 &#xa;[..@quota_operator]：&#xa;- sb_immer_adjust_by_tab  垂类tab下进入直播间后上下滑展现该垂类相关资源，控制相关性，类目match映射在代码中&#xa;- sb_immer_adjust_by_live_type  直播类型排序 - 直播&gt;回放&gt;预告&#xa;● live_follow_queue队列 &#xa;[..@quota_operator] sb_immer_adjust_by_tab 类目相关性控制&#xa;● live_immer_ds_queue 队列&#xa;[..@quota_operator]&#xa;- sb_immer_adjust_by_tab 类目相关性控制&#xa;- sb_immer_adjust_by_live_type 直播类型排序 - 直播&gt;回放&gt;预告&#xa;- sb_immer_ds_digital_person_adjust&#xa;&#xa;&#xa;" link="队列结果预调整&#xa;live_video._immer队列进行下述算子：&#xa;sb_immer_.adjust_by_.tab：垂类tab下进入直播间后上下滑展现该垂类相关资源，控制相关性，类目match映射在代码中&#xa;sb_immer_.adjust_by_Iive_type:沉浸式置顶直播，排序方式为直播&gt;回放&gt;预告" id="CTMLsmFPayaTSugQ_vrA-67">
          <mxCell style="text;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="-162.5" y="-28.379999999999995" width="663" height="152.38" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-68" value="用户/物料特征的多目标精排打分&#xa;[.@quota_list]：live_immer_ds_queue&#xa;" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-769.5" y="207.21000000000004" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-69" value="用户/物料特征的多目标精排打分&#xa;[.@quota_list]：&#xa;● live_video_immer&#xa;● live_follow_queue&#xa;" style="text;whiteSpace=wrap;fontStyle=0" parent="1" vertex="1">
          <mxGeometry x="-147.5" y="194" width="188" height="80" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-70" value="操作live_video_immer队列，去重打标包含标题/封面/视频/session重复&#xa;PS：在后面干预模块根据标记去重" style="text;whiteSpace=wrap;spacing=6;" parent="1" vertex="1">
          <mxGeometry x="186.5" y="200" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-71" value="各功能队列 精排得分规则调整&#xa;● live_video_immer 队列 （非top2混排）&#xa;[..@operator] sb_immer_multi_adjust_merge_q 计算5s和30s加权融合得分 ... ...&#xa;● live_follow_queue 队列 &#xa;[..@operator] sb_immer_multi_adjust_merge_q 计算5s和30s加权融合得分 ... ...&#xa;● live_immer_ds_queue 队列 （top2）&#xa;[..@operator] &#xa;- shoubai_immer_multi_adjust_by_cvr_ds:DE级主播打压，D主播分数乘0.1，E主播分数置为0&#xa;- shoubai_immer_multi_adjust_by_relationship：关注主播提权&#xa;● live_immer_ds_rank_queue 队列 &#xa;[..@operator] do_nothing_queue_adjust&#xa;&#xa;&#xa;" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-157.5" y="300.52" width="916" height="113.98" as="geometry" />
        </mxCell>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-72" value="多功能队列 结果合并&#xa;1.子队列内部处理&#xa;● Iive_immer_ds_queue   沉浸式电商入口队列 （S级）&#xa;[...@innersort_operator]  &#xa;- live_immers_ds_cvr_sort 词典配置排序方式和排序逻辑，比如默认时长排序/和入口资源相关的时长排序/和候选集合icf相关的直播间调权排序等等，最后选择top2资源（即电商资源）&#xa;● Iive_follow_queue （A级）&#xa;[...@innersort_operator] 包含白名单关注主播前置，已观看关注主播后置（包含一跳/二跳/沉浸式）&#xa;- live_follow_sort &#xa;- live_follow_dispatch_sort&#xa;- ... ...&#xa;●yyflowgift_queue 流量礼物 （B级）&#xa;[...@innersort_operator]  yyflowgift_inner_sort 内部排序&#xa;&#xa;2.各子队列结果排序合并入主队列 live_video_immer&#xa;按照不同子队列级别合并，S队列优先插入，A级队列次级插入，B级队列最后插入。&#xa;先把子队列去重放入临时空间中，再把主队列放入临时空间，最后临时空间作为主队列结果返回。" style="text;whiteSpace=wrap;spacing=7;" parent="1" vertex="1">
          <mxGeometry x="-160.5" y="479" width="981" height="250" as="geometry" />
        </mxCell>
        <UserObject label="返回结果干预&#xa;● sb_immer_intervention_by_live_type:对每种类型直播分布做多样性，并按未展现直播，展现直播，回放顺序进行排序。预约资源多样性控制，并插入关注之前&#xa;● sb_immer_intervention_by_source:干预资源强插第二位开始（已注释）&#xa;● sb_immer_intervention_by_source_search 手百搜索场景下电商请求的 沉浸式逻辑&#xa;● sb_immer_intervention_by_source_zcm_search 手百搜索场景下zcm电商请求的 沉浸式逻辑&#xa;● intervene_haokan_market_data 好看逻辑&#xa;● sb_intervention_by_del_duplicate:过滤删除重复资源，之前dp中打标的重复资源&#xa;● sb_immer_intervention_by_tab:垂类tab下进入直播间后上下滑展现该垂类相关资源&#xa;● top_user_follows：关注主播在前，其他主播在后&#xa;● sb_immer_position_change:沉浸式场景强插干预，先正常主播，后位置干预主播（非首位特权）&#xa;● sb_immer_position_change_by_law: 规避法务风险，媒体类资源前后不展示秀场、游戏、电商带货（不区分入口场景）" link="返回结果干预&#xa;sb_immer_.intervention_by_.Iive_type:对每种类型直播分布做多样性，并按未展现直播，展现直播，回放顺序进行排序。预约资源多样性控制，并插入关注之前&#xa;sb_immer_.intervention_by_.source:干预资源强插第二位开始&#xa;●&#xa;sb_intervention_by._del_duplicate:过滤删除重复资源，之前dp中打标的重复资源&#xa;●&#xa;top_user_follows：关注主播在前其他主播在后&#xa;●&#xa;sb_immer_.intervention._by_tab:垂类tab下进入直播间后上下滑展现该垂类相关资源&#xa;●&#xa;sb_immer_.position_change:沉浸式场景强插干预，先正常主播，后位置干预主播&#xa;sb_immer_.position._change._by_Ilaw:规避法务风险，媒体类资源前后不展示秀场、游戏、电商带货（不区分入口场景）" id="CTMLsmFPayaTSugQ_vrA-73">
          <mxCell style="text;whiteSpace=wrap;" parent="1" vertex="1">
            <mxGeometry x="-159.5" y="748" width="970" height="172" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="CTMLsmFPayaTSugQ_vrA-74" value="结果组装&#xa;● shoubai immer附加处理逻辑&#xa;● 电商主播分级落盘&#xa;● 沉浸式多目标预估分透传至grc&#xa;● 主播等级落盘&#xa;● D级主播流量盖帽落盘" style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-165.48" y="938" width="201" height="96.37" as="geometry" />
        </mxCell>
        <mxCell id="1q_19juKDQYcNWKgW3-u-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;strokeColor=#17AAD5;dashed=1;" parent="1" source="1q_19juKDQYcNWKgW3-u-1" target="CTMLsmFPayaTSugQ_vrA-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-438.5" y="-921" />
              <mxPoint x="-273.5" y="-921" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1q_19juKDQYcNWKgW3-u-1" value="SBImmerDsUserSNDB" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#17AAD5;" parent="1" vertex="1">
          <mxGeometry x="-495.49950338600456" y="-1001.6471626656853" width="142.0316027088036" height="50.722683099933626" as="geometry" />
        </mxCell>
        <mxCell id="1q_19juKDQYcNWKgW3-u-5" value="&lt;div data-morpho-block-id=&quot;docyg-244403e9-b055-11ee-b7bd-ffd951228c3b&quot; data-slate-node=&quot;element&quot; style=&quot;text-align: left; padding-left: 0px;&quot; data-morpho-type=&quot;paragraph&quot; class=&quot;mp-paragraph-wrapper&quot;&gt;获取&lt;span style=&quot;color: rgb(28, 29, 31); background-color: initial;&quot;&gt;电商&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;用户分层&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: rgb(28, 29, 31);&quot;&gt;ds_user_layer_tag : 1:低活跃 2:未转化 3:核心&lt;/span&gt;&lt;/div&gt;&lt;div data-morpho-block-id=&quot;docyg-244403e9-b055-11ee-b7bd-ffd951228c3b&quot; data-slate-node=&quot;element&quot; style=&quot;text-align: left; padding-left: 0px;&quot; data-morpho-type=&quot;paragraph&quot; class=&quot;mp-paragraph-wrapper&quot;&gt;&lt;span style=&quot;color: rgb(28, 29, 31); background-color: transparent;&quot;&gt;- 浅层用户：30天点击&amp;lt;=5 &amp;amp; 90天购买 &amp;lt;= 1&lt;/span&gt;&lt;/div&gt;&lt;div data-morpho-block-id=&quot;docyg-244403e9-b055-11ee-b7bd-ffd951228c3b&quot; data-slate-node=&quot;element&quot; style=&quot;text-align: left; padding-left: 0px;&quot; data-morpho-type=&quot;paragraph&quot; class=&quot;mp-paragraph-wrapper&quot;&gt;&lt;span style=&quot;color: rgb(28, 29, 31); background-color: transparent;&quot;&gt;-&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;font color=&quot;#1c1d1f&quot;&gt;中层用户：30天点击&amp;gt;5 &amp;amp; 90天购买 = 0&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div data-morpho-block-id=&quot;docyg-244403e9-b055-11ee-b7bd-ffd951228c3b&quot; data-slate-node=&quot;element&quot; style=&quot;text-align: left; padding-left: 0px;&quot; data-morpho-type=&quot;paragraph&quot; class=&quot;mp-paragraph-wrapper&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;font color=&quot;#1c1d1f&quot;&gt;-&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;font color=&quot;#1c1d1f&quot;&gt;核心用户：(30天点击&amp;gt;5 &amp;amp; 90天购买 = 1) 或 90天购买 &amp;gt;= 2&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span class=&quot;mp-morpho-clipboard-doc-data&quot; data-morpho-doc-data=&quot;{&amp;quot;token&amp;quot;:&amp;quot;eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIiwiYXBwSWQiOjEsInVpZCI6IjlDcDg0RE0wY3QiLCJkb2NJZCI6IjUzNTdmODQ1ZWIwZjRmIn0..yqYl5LdsXMqG1i7H.h2zJN3ad7F0z8zZrL0x5SOSICrESLMV8dEU74EoNBORcdlZFNPWUUC4eia0j4AlamyoKcnQPkH-a4lMZglok0qHV8snmgu5q_vtArxVLRdtko599JwHxf3FpeFeTS3M7G6M1K6R9dh_B0HznSrV_KdrdgtxzzaYRmO5DbicUDLtVJrqaJiWrUDvuusRhMEex5vd5Xe8CMfA0J2DoPf_h3tOpSw.nvGQq45J5KLfsjFWWvhn9A&amp;quot;}&quot;&gt;&lt;/span&gt;&lt;div data-morpho-block-id=&quot;docyg-244403e9-b055-11ee-b7bd-ffd951228c3b&quot; data-slate-node=&quot;element&quot; style=&quot;padding-left:0px&quot; data-morpho-type=&quot;paragraph&quot; class=&quot;mp-paragraph-wrapper&quot;&gt;&lt;span class=&quot;mp-morpho-clipboard-doc-data&quot; data-morpho-doc-data=&quot;{&amp;quot;token&amp;quot;:&amp;quot;eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIiwiYXBwSWQiOjEsInVpZCI6IjlDcDg0RE0wY3QiLCJkb2NJZCI6IjUzNTdmODQ1ZWIwZjRmIn0..yqYl5LdsXMqG1i7H.h2zJN3ad7F0z8zZrL0x5SOSICrESLMV8dEU74EoNBORcdlZFNPWUUC4eia0j4AlamyoKcnQPkH-a4lMZglok0qHV8snmgu5q_vtArxVLRdtko599JwHxf3FpeFeTS3M7G6M1K6R9dh_B0HznSrV_KdrdgtxzzaYRmO5DbicUDLtVJrqaJiWrUDvuusRhMEex5vd5Xe8CMfA0J2DoPf_h3tOpSw.nvGQq45J5KLfsjFWWvhn9A&amp;quot;}&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;span class=&quot;mp-morpho-clipboard-doc-data&quot; data-morpho-doc-data=&quot;{&amp;quot;token&amp;quot;:&amp;quot;eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIiwiYXBwSWQiOjEsInVpZCI6IjlDcDg0RE0wY3QiLCJkb2NJZCI6IjUzNTdmODQ1ZWIwZjRmIn0..pCHAVqKNl6A6FzGB.4LZeJNNsyfY-32JqOU4ROncP46VGgSdZKTIl4vjHuSVVTp13aCAMcsRqBmcMl11NA9PIhYyMEap1sNyuyVQPSBf3OS6b5mUCJUOoVcmleNhX4NoEdu-47aaP1DD8qN72Av_ruHi6Yksv0HpaVPMhnA-DxDfH-j-qqGou7mZcKCkmcx_sVsXQGSck9p826Wd89kI1APDDWsyadTtQYAsBp4rLoQ.nJl7Tq-rMvyrGDB84ryziw&amp;quot;}&quot;&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-826.5" y="-1026.65" width="360" height="70" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-1" value="沉浸式场景 - query用户类型 Abtest " style="text;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-328.16" y="-961.65" width="208.66" height="40" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-3" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.983;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-826.5" y="-35" as="sourcePoint" />
            <mxPoint x="805.857" y="-37.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-4" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.983;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-826.5" y="177.5" as="sourcePoint" />
            <mxPoint x="805.857" y="175" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-5" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.983;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-826.5" y="478.5" as="sourcePoint" />
            <mxPoint x="805.857" y="476" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-6" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.983;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-826.5" y="743.5" as="sourcePoint" />
            <mxPoint x="805.857" y="741" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-7" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.983;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-826.5" y="931" as="sourcePoint" />
            <mxPoint x="805.857" y="928.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-8" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;预处理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-819.5" y="-752.76" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-9" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;召回&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-814.5" y="-684.65" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-10" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;粗排&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-814.5" y="109" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-11" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;精排&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-814.5" y="445" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-12" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;多队列合并&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-823" y="698" width="76" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-13" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;后处理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-827" y="887" width="76" height="30" as="geometry" />
        </mxCell>
        <mxCell id="S-GF0X4kSmyvK1DAIHs_-14" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;返回&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-826.5" y="960" width="76" height="30" as="geometry" />
        </mxCell>
        <mxCell id="MOqXADL53VNv9DjTgGzq-3" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.983;entryY=-0.01;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-826.5" y="-587.5" as="sourcePoint" />
            <mxPoint x="805.857" y="-590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MOqXADL53VNv9DjTgGzq-4" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;多队列生成&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-820.5" y="-73" width="76" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
